diff --git a/3party/jansson/jansson_config.h b/3party/jansson/jansson_config.h
index bf3b15b..3afafbf 100644
--- a/3party/jansson/jansson_config.h
+++ b/3party/jansson/jansson_config.h
@@ -61,11 +61,16 @@
 
 /* If __atomic builtins are available they will be used to manage
    reference counts of json_t. */
+/* MSVC doesn't have GCC __atomic builtins, so disable them */
+#ifdef _MSC_VER
+#define JSON_HAVE_ATOMIC_BUILTINS 0
+#define JSON_HAVE_SYNC_BUILTINS 0
+#else
 #define JSON_HAVE_ATOMIC_BUILTINS 1
-
 /* If __atomic builtins are not available we try using __sync builtins
    to manage reference counts of json_t. */
 #define JSON_HAVE_SYNC_BUILTINS 1
+#endif
 
 /* Maximum recursion depth for parsing JSON input.
    This limits the depth of e.g. array-within-array constructions. */

