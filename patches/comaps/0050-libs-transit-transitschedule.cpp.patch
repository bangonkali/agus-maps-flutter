diff --git a/libs/transit/transit_schedule.cpp b/libs/transit/transit_schedule.cpp
index cd99006..88ff35a 100644
--- a/libs/transit/transit_schedule.cpp
+++ b/libs/transit/transit_schedule.cpp
@@ -3,6 +3,16 @@
 #include "base/assert.hpp"
 #include "base/logging.hpp"
 
+// Windows doesn't have localtime_r, use localtime_s instead
+#ifdef _WIN32
+#include <time.h>
+inline struct tm* localtime_r(const time_t* timep, struct tm* result) {
+  if (localtime_s(result, timep) == 0)
+    return result;
+  return nullptr;
+}
+#endif
+
 namespace
 {
 // Constant which is added to the year value while deserizlizing from the unsigned int.

